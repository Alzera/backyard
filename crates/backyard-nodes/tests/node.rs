use backyard_nodes::node::{ Inheritance, Modifier, Node, Quote, UseItemModifier, Visibility };

#[test]
fn use_item_modifier() {
  assert_eq!(UseItemModifier::try_parse("const"), Some(UseItemModifier::Const));
  assert_eq!(UseItemModifier::try_parse("function"), Some(UseItemModifier::Function));
  assert_eq!(UseItemModifier::try_parse("none"), None);

  assert_eq!("const", format!("{}", UseItemModifier::Const));
  assert_eq!("function", format!("{}", UseItemModifier::Function));
}

#[test]
fn modifier() {
  assert_eq!(Modifier::try_parse("static"), Some(Modifier::Static));
  assert_eq!(Modifier::try_parse("readonly"), Some(Modifier::Readonly));
  assert_eq!(Modifier::try_parse("none"), None);

  assert_eq!("static", format!("{}", Modifier::Static));
  assert_eq!("readonly", format!("{}", Modifier::Readonly));
}

#[test]
fn quote() {
  assert_eq!(Quote::try_parse("'"), Some(Quote::Single));
  assert_eq!(Quote::try_parse("\""), Some(Quote::Double));
  assert_eq!(Quote::try_parse("`"), Some(Quote::Backtick));
  assert_eq!(Quote::try_parse("none"), None);

  assert_eq!("'", format!("{}", Quote::Single));
  assert_eq!("\"", format!("{}", Quote::Double));
  assert_eq!("`", format!("{}", Quote::Backtick));
}

#[test]
fn inheritance() {
  assert_eq!(Inheritance::try_parse("abstract"), Some(Inheritance::Abstract));
  assert_eq!(Inheritance::try_parse("final"), Some(Inheritance::Final));
  assert_eq!(Inheritance::try_parse("none"), None);

  assert_eq!("abstract", format!("{}", Inheritance::Abstract));
  assert_eq!("final", format!("{}", Inheritance::Final));
}

#[test]
fn visibility() {
  assert_eq!(Visibility::try_parse("private"), Some(Visibility::Private));
  assert_eq!(Visibility::try_parse("protected"), Some(Visibility::Protected));
  assert_eq!(Visibility::try_parse("public"), Some(Visibility::Public));
  assert_eq!(Visibility::try_parse("none"), None);

  assert_eq!("private", format!("{}", Visibility::Private));
  assert_eq!("protected", format!("{}", Visibility::Protected));
  assert_eq!("public", format!("{}", Visibility::Public));
}

#[test]
fn node_deserialize() {
  let sample =
    "{\"leadings\":[],\"trailings\":[],\"node_type\":\"program\",\"children\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"declare\",\"arguments\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"declare_argument\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"strict_types\",\"loc\":{\"start\":{\"line\":2,\"column\":8,\"offset\":14},\"end\":{\"line\":2,\"column\":20,\"offset\":26}}},\"value\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"number\",\"value\":\"1\",\"loc\":{\"start\":{\"line\":2,\"column\":23,\"offset\":29},\"end\":{\"line\":2,\"column\":23,\"offset\":29}}},\"loc\":{\"start\":{\"line\":2,\"column\":8,\"offset\":14},\"end\":{\"line\":2,\"column\":23,\"offset\":29}}}],\"body\":null,\"body_type\":\"Empty\",\"loc\":{\"start\":{\"line\":2,\"column\":0,\"offset\":6},\"end\":{\"line\":2,\"column\":24,\"offset\":30}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"include\",\"use_parenthesis\":false,\"is_require\":true,\"is_once\":true,\"argument\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"string\",\"quote\":\"Single\",\"value\":\"foo.php\",\"loc\":{\"start\":{\"line\":3,\"column\":13,\"offset\":46},\"end\":{\"line\":3,\"column\":13,\"offset\":46}}},\"loc\":{\"start\":{\"line\":3,\"column\":0,\"offset\":33},\"end\":{\"line\":3,\"column\":13,\"offset\":46}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"namespace\",\"name\":\"sample\",\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"use\",\"name\":\"foo\\\\\",\"items\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"use_item\",\"modifier\":null,\"name\":\"baz\",\"alias\":null,\"loc\":{\"start\":{\"line\":8,\"column\":2,\"offset\":90},\"end\":{\"line\":8,\"column\":2,\"offset\":90}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"use_item\",\"modifier\":null,\"name\":\"bar\",\"alias\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"fooBar\",\"loc\":{\"start\":{\"line\":9,\"column\":9,\"offset\":104},\"end\":{\"line\":9,\"column\":15,\"offset\":110}}},\"loc\":{\"start\":{\"line\":9,\"column\":2,\"offset\":97},\"end\":{\"line\":9,\"column\":9,\"offset\":104}}}],\"loc\":{\"start\":{\"line\":7,\"column\":0,\"offset\":77},\"end\":{\"line\":10,\"column\":0,\"offset\":111}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"const\",\"items\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"assignment\",\"left\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"FOOBAR\",\"loc\":{\"start\":{\"line\":13,\"column\":6,\"offset\":132},\"end\":{\"line\":13,\"column\":12,\"offset\":138}}},\"operator\":\"=\",\"right\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"string\",\"quote\":\"Single\",\"value\":\"BARFOO\",\"loc\":{\"start\":{\"line\":13,\"column\":15,\"offset\":141},\"end\":{\"line\":13,\"column\":15,\"offset\":141}}},\"loc\":{\"start\":{\"line\":13,\"column\":13,\"offset\":139},\"end\":{\"line\":13,\"column\":15,\"offset\":141}}}],\"loc\":{\"start\":{\"line\":13,\"column\":0,\"offset\":126},\"end\":{\"line\":13,\"column\":15,\"offset\":141}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"trait\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"foo\",\"loc\":{\"start\":{\"line\":15,\"column\":6,\"offset\":158},\"end\":{\"line\":15,\"column\":9,\"offset\":161}}},\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[],\"loc\":{\"start\":{\"line\":15,\"column\":10,\"offset\":162},\"end\":{\"line\":15,\"column\":11,\"offset\":163}}},\"loc\":{\"start\":{\"line\":15,\"column\":0,\"offset\":152},\"end\":{\"line\":15,\"column\":11,\"offset\":163}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"interface\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"bar\",\"loc\":{\"start\":{\"line\":17,\"column\":10,\"offset\":176},\"end\":{\"line\":17,\"column\":13,\"offset\":179}}},\"extends\":[],\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[],\"loc\":{\"start\":{\"line\":17,\"column\":14,\"offset\":180},\"end\":{\"line\":17,\"column\":15,\"offset\":181}}},\"loc\":{\"start\":{\"line\":17,\"column\":0,\"offset\":166},\"end\":{\"line\":17,\"column\":15,\"offset\":181}}},{\"leadings\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"comment_block\",\"comment\":\" comment block \",\"loc\":{\"start\":{\"line\":19,\"column\":0,\"offset\":184},\"end\":{\"line\":19,\"column\":0,\"offset\":184}}}],\"trailings\":[],\"node_type\":\"enum\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"foo\",\"loc\":{\"start\":{\"line\":20,\"column\":5,\"offset\":209},\"end\":{\"line\":20,\"column\":8,\"offset\":212}}},\"enum_type\":null,\"implements\":null,\"body\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"enum_item\",\"value\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"bar\",\"loc\":{\"start\":{\"line\":21,\"column\":7,\"offset\":222},\"end\":{\"line\":21,\"column\":10,\"offset\":225}}},\"loc\":{\"start\":{\"line\":21,\"column\":2,\"offset\":217},\"end\":{\"line\":21,\"column\":7,\"offset\":222}}}],\"loc\":{\"start\":{\"line\":20,\"column\":0,\"offset\":204},\"end\":{\"line\":22,\"column\":0,\"offset\":227}}},{\"leadings\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"comment_doc\",\"comment\":\"\\n * comment doc\\n \",\"loc\":{\"start\":{\"line\":24,\"column\":0,\"offset\":230},\"end\":{\"line\":24,\"column\":0,\"offset\":230}}}],\"trailings\":[],\"node_type\":\"class\",\"inheritance\":null,\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"A\",\"loc\":{\"start\":{\"line\":27,\"column\":6,\"offset\":259},\"end\":{\"line\":27,\"column\":7,\"offset\":260}}},\"extends\":null,\"implements\":[],\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"trait_use\",\"traits\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"foo\",\"loc\":{\"start\":{\"line\":28,\"column\":6,\"offset\":269},\"end\":{\"line\":28,\"column\":9,\"offset\":272}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"bar\",\"loc\":{\"start\":{\"line\":28,\"column\":11,\"offset\":274},\"end\":{\"line\":28,\"column\":14,\"offset\":277}}}],\"adaptations\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"trait_use_precedence\",\"trait_name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"foo\",\"loc\":{\"start\":{\"line\":29,\"column\":4,\"offset\":284},\"end\":{\"line\":29,\"column\":7,\"offset\":287}}},\"method\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"baz\",\"loc\":{\"start\":{\"line\":29,\"column\":9,\"offset\":289},\"end\":{\"line\":29,\"column\":12,\"offset\":292}}},\"instead\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"bar\",\"loc\":{\"start\":{\"line\":29,\"column\":23,\"offset\":303},\"end\":{\"line\":29,\"column\":26,\"offset\":306}}},\"loc\":{\"start\":{\"line\":29,\"column\":4,\"offset\":284},\"end\":{\"line\":29,\"column\":23,\"offset\":303}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"trait_use_alias\",\"trait_name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"bar\",\"loc\":{\"start\":{\"line\":30,\"column\":4,\"offset\":312},\"end\":{\"line\":30,\"column\":7,\"offset\":315}}},\"method\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"foo\",\"loc\":{\"start\":{\"line\":30,\"column\":9,\"offset\":317},\"end\":{\"line\":30,\"column\":12,\"offset\":320}}},\"alias\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"baz\",\"loc\":{\"start\":{\"line\":30,\"column\":16,\"offset\":324},\"end\":{\"line\":30,\"column\":19,\"offset\":327}}},\"visibility\":null,\"loc\":{\"start\":{\"line\":30,\"column\":4,\"offset\":312},\"end\":{\"line\":30,\"column\":16,\"offset\":324}}}],\"loc\":{\"start\":{\"line\":28,\"column\":2,\"offset\":265},\"end\":{\"line\":31,\"column\":2,\"offset\":331}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"const_property\",\"visibility\":null,\"items\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"assignment\",\"left\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"FOOBAR\",\"loc\":{\"start\":{\"line\":33,\"column\":8,\"offset\":342},\"end\":{\"line\":33,\"column\":14,\"offset\":348}}},\"operator\":\"=\",\"right\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"string\",\"quote\":\"Single\",\"value\":\"BARFOO\",\"loc\":{\"start\":{\"line\":33,\"column\":17,\"offset\":351},\"end\":{\"line\":33,\"column\":17,\"offset\":351}}},\"loc\":{\"start\":{\"line\":33,\"column\":15,\"offset\":349},\"end\":{\"line\":33,\"column\":17,\"offset\":351}}}],\"loc\":{\"start\":{\"line\":33,\"column\":2,\"offset\":336},\"end\":{\"line\":33,\"column\":17,\"offset\":351}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"property\",\"visibility\":\"Protected\",\"modifier\":null,\"items\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"property_item\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"foo\",\"loc\":{\"start\":{\"line\":34,\"column\":23,\"offset\":384},\"end\":{\"line\":34,\"column\":26,\"offset\":387}}},\"variable_type\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"union_type\",\"types\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"intersection_type\",\"types\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"type\",\"is_nullable\":false,\"name\":\"A\",\"loc\":{\"start\":{\"line\":34,\"column\":13,\"offset\":374},\"end\":{\"line\":34,\"column\":14,\"offset\":375}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"type\",\"is_nullable\":false,\"name\":\"B\",\"loc\":{\"start\":{\"line\":34,\"column\":15,\"offset\":376},\"end\":{\"line\":34,\"column\":16,\"offset\":377}}}],\"loc\":{\"start\":{\"line\":34,\"column\":14,\"offset\":375},\"end\":{\"line\":34,\"column\":16,\"offset\":377}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"type\",\"is_nullable\":false,\"name\":\"null\",\"loc\":{\"start\":{\"line\":34,\"column\":18,\"offset\":379},\"end\":{\"line\":34,\"column\":22,\"offset\":383}}}],\"loc\":{\"start\":{\"line\":34,\"column\":16,\"offset\":377},\"end\":{\"line\":34,\"column\":22,\"offset\":383}}},\"value\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"null\",\"loc\":{\"start\":{\"line\":34,\"column\":30,\"offset\":391},\"end\":{\"line\":34,\"column\":30,\"offset\":391}}},\"loc\":{\"start\":{\"line\":34,\"column\":23,\"offset\":384},\"end\":{\"line\":34,\"column\":30,\"offset\":391}}}],\"loc\":{\"start\":{\"line\":34,\"column\":2,\"offset\":363},\"end\":{\"line\":34,\"column\":34,\"offset\":395}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"method\",\"visibility\":null,\"inheritance\":null,\"is_static\":false,\"function\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"function\",\"is_ref\":false,\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"__construct\",\"loc\":{\"start\":{\"line\":36,\"column\":11,\"offset\":409},\"end\":{\"line\":36,\"column\":22,\"offset\":420}}},\"parameters\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"constructor_parameter\",\"visibility\":\"Public\",\"modifier\":null,\"parameter\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"parameter\",\"variable_type\":null,\"is_ref\":false,\"is_ellipsis\":false,\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"a\",\"loc\":{\"start\":{\"line\":36,\"column\":30,\"offset\":428},\"end\":{\"line\":36,\"column\":31,\"offset\":429}}},\"value\":null,\"loc\":{\"start\":{\"line\":36,\"column\":30,\"offset\":428},\"end\":{\"line\":36,\"column\":30,\"offset\":428}}},\"loc\":{\"start\":{\"line\":36,\"column\":23,\"offset\":421},\"end\":{\"line\":36,\"column\":30,\"offset\":428}}}],\"return_type\":null,\"body\":{\"leadings\":[],\"trailings\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"comment_line\",\"comment\":\" comment line\",\"loc\":{\"start\":{\"line\":52,\"column\":2,\"offset\":669},\"end\":{\"line\":52,\"column\":2,\"offset\":669}}}],\"node_type\":\"block\",\"statements\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"assignment\",\"left\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"list\",\"items\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"variable\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"a\",\"loc\":{\"start\":{\"line\":37,\"column\":9,\"offset\":442},\"end\":{\"line\":37,\"column\":10,\"offset\":443}}},\"loc\":{\"start\":{\"line\":37,\"column\":9,\"offset\":442},\"end\":{\"line\":37,\"column\":10,\"offset\":443}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"variable\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"b\",\"loc\":{\"start\":{\"line\":37,\"column\":13,\"offset\":446},\"end\":{\"line\":37,\"column\":14,\"offset\":447}}},\"loc\":{\"start\":{\"line\":37,\"column\":13,\"offset\":446},\"end\":{\"line\":37,\"column\":14,\"offset\":447}}}],\"loc\":{\"start\":{\"line\":37,\"column\":4,\"offset\":437},\"end\":{\"line\":37,\"column\":15,\"offset\":448}}},\"operator\":\"=\",\"right\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"match\",\"condition\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"variable\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"a\",\"loc\":{\"start\":{\"line\":37,\"column\":26,\"offset\":459},\"end\":{\"line\":37,\"column\":27,\"offset\":460}}},\"loc\":{\"start\":{\"line\":37,\"column\":26,\"offset\":459},\"end\":{\"line\":37,\"column\":27,\"offset\":460}}},\"arms\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"match_arm\",\"conditions\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"magic\",\"name\":\"__DIR__\",\"loc\":{\"start\":{\"line\":38,\"column\":6,\"offset\":471},\"end\":{\"line\":38,\"column\":6,\"offset\":471}}}],\"expr\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"clone\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"number\",\"value\":\"2\",\"loc\":{\"start\":{\"line\":38,\"column\":23,\"offset\":488},\"end\":{\"line\":38,\"column\":23,\"offset\":488}}},\"loc\":{\"start\":{\"line\":38,\"column\":17,\"offset\":482},\"end\":{\"line\":38,\"column\":23,\"offset\":488}}},\"loc\":{\"start\":{\"line\":38,\"column\":6,\"offset\":471},\"end\":{\"line\":38,\"column\":24,\"offset\":489}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"match_arm\",\"conditions\":[],\"expr\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"cast\",\"cast_type\":\"int\",\"expression\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"number\",\"value\":\"3\",\"loc\":{\"start\":{\"line\":39,\"column\":23,\"offset\":514},\"end\":{\"line\":39,\"column\":23,\"offset\":514}}},\"loc\":{\"start\":{\"line\":39,\"column\":17,\"offset\":508},\"end\":{\"line\":39,\"column\":23,\"offset\":514}}},\"loc\":{\"start\":{\"line\":39,\"column\":6,\"offset\":497},\"end\":{\"line\":39,\"column\":24,\"offset\":515}}}],\"loc\":{\"start\":{\"line\":37,\"column\":19,\"offset\":452},\"end\":{\"line\":40,\"column\":4,\"offset\":521}}},\"loc\":{\"start\":{\"line\":37,\"column\":17,\"offset\":450},\"end\":{\"line\":40,\"column\":4,\"offset\":521}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"if\",\"condition\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"bin\",\"left\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"Foo\",\"loc\":{\"start\":{\"line\":41,\"column\":7,\"offset\":531},\"end\":{\"line\":41,\"column\":10,\"offset\":534}}},\"operator\":\">\",\"right\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"number\",\"value\":\"5\",\"loc\":{\"start\":{\"line\":41,\"column\":13,\"offset\":537},\"end\":{\"line\":41,\"column\":13,\"offset\":537}}},\"loc\":{\"start\":{\"line\":41,\"column\":11,\"offset\":535},\"end\":{\"line\":41,\"column\":13,\"offset\":537}}},\"valid\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"do_while\",\"condition\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"do_while_condition\",\"condition\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"boolean\",\"is_true\":false,\"loc\":{\"start\":{\"line\":44,\"column\":15,\"offset\":588},\"end\":{\"line\":44,\"column\":15,\"offset\":588}}},\"loc\":{\"start\":{\"line\":44,\"column\":8,\"offset\":581},\"end\":{\"line\":44,\"column\":15,\"offset\":588}}},\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"inline\",\"text\":\"Test\",\"loc\":{\"start\":{\"line\":43,\"column\":8,\"offset\":561},\"end\":{\"line\":43,\"column\":8,\"offset\":561}}}],\"loc\":{\"start\":{\"line\":42,\"column\":9,\"offset\":551},\"end\":{\"line\":44,\"column\":6,\"offset\":579}}},\"loc\":{\"start\":{\"line\":42,\"column\":6,\"offset\":548},\"end\":{\"line\":44,\"column\":20,\"offset\":593}}}],\"loc\":{\"start\":{\"line\":41,\"column\":16,\"offset\":540},\"end\":{\"line\":45,\"column\":4,\"offset\":600}}},\"invalid\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"else\",\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"echo\",\"items\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"call\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"parenthesis\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"anonymous_function\",\"is_ref\":false,\"parameters\":[],\"uses\":[],\"return_type\":null,\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[],\"loc\":{\"start\":{\"line\":46,\"column\":23,\"offset\":632},\"end\":{\"line\":48,\"column\":6,\"offset\":641}}},\"loc\":{\"start\":{\"line\":46,\"column\":12,\"offset\":621},\"end\":{\"line\":48,\"column\":6,\"offset\":641}}},\"loc\":{\"start\":{\"line\":46,\"column\":11,\"offset\":620},\"end\":{\"line\":48,\"column\":7,\"offset\":642}}},\"arguments\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"call_argument\",\"name\":null,\"value\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"arrow_function\",\"is_ref\":false,\"parameters\":[],\"return_type\":null,\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"number\",\"value\":\"5\",\"loc\":{\"start\":{\"line\":48,\"column\":17,\"offset\":652},\"end\":{\"line\":48,\"column\":17,\"offset\":652}}},\"loc\":{\"start\":{\"line\":48,\"column\":9,\"offset\":644},\"end\":{\"line\":48,\"column\":17,\"offset\":652}}},\"loc\":{\"start\":{\"line\":48,\"column\":9,\"offset\":644},\"end\":{\"line\":48,\"column\":17,\"offset\":652}}}],\"loc\":{\"start\":{\"line\":48,\"column\":8,\"offset\":643},\"end\":{\"line\":48,\"column\":18,\"offset\":653}}}],\"loc\":{\"start\":{\"line\":46,\"column\":6,\"offset\":615},\"end\":{\"line\":48,\"column\":18,\"offset\":653}}}],\"loc\":{\"start\":{\"line\":45,\"column\":11,\"offset\":607},\"end\":{\"line\":49,\"column\":4,\"offset\":660}}},\"is_short\":false,\"loc\":{\"start\":{\"line\":45,\"column\":6,\"offset\":602},\"end\":{\"line\":49,\"column\":4,\"offset\":660}}},\"is_short\":false,\"loc\":{\"start\":{\"line\":41,\"column\":4,\"offset\":528},\"end\":{\"line\":49,\"column\":4,\"offset\":660}}}],\"loc\":{\"start\":{\"line\":36,\"column\":33,\"offset\":431},\"end\":{\"line\":50,\"column\":2,\"offset\":664}}},\"loc\":{\"start\":{\"line\":36,\"column\":2,\"offset\":400},\"end\":{\"line\":52,\"column\":2,\"offset\":669}}},\"loc\":{\"start\":{\"line\":36,\"column\":2,\"offset\":400},\"end\":{\"line\":52,\"column\":2,\"offset\":669}}},{\"leadings\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"attribute\",\"items\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"attribute_item\",\"name\":\"attr\",\"arguments\":[],\"loc\":{\"start\":{\"line\":53,\"column\":4,\"offset\":689},\"end\":{\"line\":53,\"column\":4,\"offset\":689}}}],\"loc\":{\"start\":{\"line\":53,\"column\":2,\"offset\":687},\"end\":{\"line\":86,\"column\":2,\"offset\":1367}}}],\"trailings\":[],\"node_type\":\"method\",\"visibility\":\"Private\",\"inheritance\":null,\"is_static\":false,\"function\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"function\",\"is_ref\":false,\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"test\",\"loc\":{\"start\":{\"line\":54,\"column\":19,\"offset\":714},\"end\":{\"line\":54,\"column\":23,\"offset\":718}}},\"parameters\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"parameter\",\"variable_type\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"type\",\"is_nullable\":false,\"name\":\"int\",\"loc\":{\"start\":{\"line\":54,\"column\":24,\"offset\":719},\"end\":{\"line\":54,\"column\":27,\"offset\":722}}},\"is_ref\":false,\"is_ellipsis\":false,\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"x\",\"loc\":{\"start\":{\"line\":54,\"column\":28,\"offset\":723},\"end\":{\"line\":54,\"column\":29,\"offset\":724}}},\"value\":null,\"loc\":{\"start\":{\"line\":54,\"column\":28,\"offset\":723},\"end\":{\"line\":54,\"column\":28,\"offset\":723}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"parameter\",\"variable_type\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"intersection_type\",\"types\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"type\",\"is_nullable\":false,\"name\":\"string\",\"loc\":{\"start\":{\"line\":54,\"column\":32,\"offset\":727},\"end\":{\"line\":54,\"column\":38,\"offset\":733}}}],\"loc\":{\"start\":{\"line\":54,\"column\":38,\"offset\":733},\"end\":{\"line\":54,\"column\":38,\"offset\":733}}},\"is_ref\":true,\"is_ellipsis\":true,\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"y\",\"loc\":{\"start\":{\"line\":54,\"column\":43,\"offset\":738},\"end\":{\"line\":54,\"column\":44,\"offset\":739}}},\"value\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"number\",\"value\":\"0\",\"loc\":{\"start\":{\"line\":54,\"column\":48,\"offset\":743},\"end\":{\"line\":54,\"column\":48,\"offset\":743}}},\"loc\":{\"start\":{\"line\":54,\"column\":39,\"offset\":734},\"end\":{\"line\":54,\"column\":48,\"offset\":743}}}],\"return_type\":null,\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"label\",\"label\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"LABEL\",\"loc\":{\"start\":{\"line\":55,\"column\":4,\"offset\":752},\"end\":{\"line\":55,\"column\":9,\"offset\":757}}},\"loc\":{\"start\":{\"line\":55,\"column\":9,\"offset\":757},\"end\":{\"line\":55,\"column\":9,\"offset\":757}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"try\",\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"while\",\"condition\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"boolean\",\"is_true\":false,\"loc\":{\"start\":{\"line\":57,\"column\":13,\"offset\":782},\"end\":{\"line\":57,\"column\":13,\"offset\":782}}},\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"yield\",\"key\":null,\"value\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"silent\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"ternary\",\"condition\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"call\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"object_access\",\"object\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"this\",\"loc\":{\"start\":{\"line\":58,\"column\":15,\"offset\":806},\"end\":{\"line\":58,\"column\":15,\"offset\":806}}},\"property\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"a\",\"loc\":{\"start\":{\"line\":58,\"column\":22,\"offset\":813},\"end\":{\"line\":58,\"column\":23,\"offset\":814}}},\"use_bracket\":false,\"is_nullsafe\":false,\"loc\":{\"start\":{\"line\":58,\"column\":20,\"offset\":811},\"end\":{\"line\":58,\"column\":22,\"offset\":813}}},\"arguments\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"call_argument\",\"name\":null,\"value\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"variadic\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"variable\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"a\",\"loc\":{\"start\":{\"line\":58,\"column\":27,\"offset\":818},\"end\":{\"line\":58,\"column\":28,\"offset\":819}}},\"loc\":{\"start\":{\"line\":58,\"column\":27,\"offset\":818},\"end\":{\"line\":58,\"column\":28,\"offset\":819}}},\"loc\":{\"start\":{\"line\":58,\"column\":24,\"offset\":815},\"end\":{\"line\":58,\"column\":27,\"offset\":818}}},\"loc\":{\"start\":{\"line\":58,\"column\":24,\"offset\":815},\"end\":{\"line\":58,\"column\":27,\"offset\":818}}}],\"loc\":{\"start\":{\"line\":58,\"column\":23,\"offset\":814},\"end\":{\"line\":58,\"column\":29,\"offset\":820}}},\"valid\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"negate\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"static_lookup\",\"left\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"static_keyword\",\"loc\":{\"start\":{\"line\":58,\"column\":34,\"offset\":825},\"end\":{\"line\":58,\"column\":34,\"offset\":825}}},\"right\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"class_keyword\",\"loc\":{\"start\":{\"line\":58,\"column\":42,\"offset\":833},\"end\":{\"line\":58,\"column\":42,\"offset\":833}}},\"use_bracket\":false,\"loc\":{\"start\":{\"line\":58,\"column\":40,\"offset\":831},\"end\":{\"line\":58,\"column\":42,\"offset\":833}}},\"loc\":{\"start\":{\"line\":58,\"column\":33,\"offset\":824},\"end\":{\"line\":58,\"column\":42,\"offset\":833}}},\"invalid\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"call\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"parenthesis\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"post\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"array\",\"is_short\":true,\"items\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"array_item\",\"key\":null,\"value\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"number\",\"value\":\"0\",\"loc\":{\"start\":{\"line\":58,\"column\":56,\"offset\":847},\"end\":{\"line\":58,\"column\":56,\"offset\":847}}},\"loc\":{\"start\":{\"line\":58,\"column\":56,\"offset\":847},\"end\":{\"line\":58,\"column\":56,\"offset\":847}}}],\"loc\":{\"start\":{\"line\":58,\"column\":55,\"offset\":846},\"end\":{\"line\":58,\"column\":57,\"offset\":848}}},\"operator\":\"++\",\"loc\":{\"start\":{\"line\":58,\"column\":58,\"offset\":849},\"end\":{\"line\":58,\"column\":58,\"offset\":849}}},\"loc\":{\"start\":{\"line\":58,\"column\":50,\"offset\":841},\"end\":{\"line\":58,\"column\":60,\"offset\":851}}},\"arguments\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"call_argument\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"a\",\"loc\":{\"start\":{\"line\":58,\"column\":62,\"offset\":853},\"end\":{\"line\":58,\"column\":63,\"offset\":854}}},\"value\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"number\",\"value\":\"1\",\"loc\":{\"start\":{\"line\":58,\"column\":65,\"offset\":856},\"end\":{\"line\":58,\"column\":65,\"offset\":856}}},\"loc\":{\"start\":{\"line\":58,\"column\":62,\"offset\":853},\"end\":{\"line\":58,\"column\":65,\"offset\":856}}}],\"loc\":{\"start\":{\"line\":58,\"column\":61,\"offset\":852},\"end\":{\"line\":58,\"column\":66,\"offset\":857}}},\"loc\":{\"start\":{\"line\":58,\"column\":31,\"offset\":822},\"end\":{\"line\":58,\"column\":66,\"offset\":857}}},\"loc\":{\"start\":{\"line\":58,\"column\":14,\"offset\":805},\"end\":{\"line\":58,\"column\":66,\"offset\":857}}},\"loc\":{\"start\":{\"line\":58,\"column\":8,\"offset\":799},\"end\":{\"line\":58,\"column\":66,\"offset\":857}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"yield_from\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"pre\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"variable\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"a\",\"loc\":{\"start\":{\"line\":59,\"column\":21,\"offset\":881},\"end\":{\"line\":59,\"column\":22,\"offset\":882}}},\"loc\":{\"start\":{\"line\":59,\"column\":21,\"offset\":881},\"end\":{\"line\":59,\"column\":22,\"offset\":882}}},\"operator\":\"++\",\"loc\":{\"start\":{\"line\":59,\"column\":19,\"offset\":879},\"end\":{\"line\":59,\"column\":21,\"offset\":881}}},\"loc\":{\"start\":{\"line\":59,\"column\":8,\"offset\":868},\"end\":{\"line\":59,\"column\":21,\"offset\":881}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"return\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"new\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"anonymous_class\",\"parameters\":[],\"extends\":null,\"implements\":[],\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[],\"loc\":{\"start\":{\"line\":60,\"column\":25,\"offset\":910},\"end\":{\"line\":60,\"column\":26,\"offset\":911}}},\"loc\":{\"start\":{\"line\":60,\"column\":19,\"offset\":904},\"end\":{\"line\":60,\"column\":26,\"offset\":911}}},\"loc\":{\"start\":{\"line\":60,\"column\":15,\"offset\":900},\"end\":{\"line\":60,\"column\":26,\"offset\":911}}},\"loc\":{\"start\":{\"line\":60,\"column\":8,\"offset\":893},\"end\":{\"line\":60,\"column\":26,\"offset\":911}}}],\"loc\":{\"start\":{\"line\":57,\"column\":20,\"offset\":789},\"end\":{\"line\":61,\"column\":6,\"offset\":920}}},\"is_short\":false,\"loc\":{\"start\":{\"line\":57,\"column\":6,\"offset\":775},\"end\":{\"line\":61,\"column\":6,\"offset\":920}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"throw\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"new\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"call\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"\\\\ComeToHome\",\"loc\":{\"start\":{\"line\":62,\"column\":16,\"offset\":938},\"end\":{\"line\":62,\"column\":27,\"offset\":949}}},\"arguments\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"call_argument\",\"name\":null,\"value\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"now_doc\",\"label\":\"BAR\",\"value\":\"\\n  NowDoc\",\"loc\":{\"start\":{\"line\":62,\"column\":28,\"offset\":950},\"end\":{\"line\":64,\"column\":2,\"offset\":970}}},\"loc\":{\"start\":{\"line\":62,\"column\":28,\"offset\":950},\"end\":{\"line\":64,\"column\":2,\"offset\":970}}}],\"loc\":{\"start\":{\"line\":62,\"column\":27,\"offset\":949},\"end\":{\"line\":64,\"column\":3,\"offset\":971}}},\"loc\":{\"start\":{\"line\":62,\"column\":12,\"offset\":934},\"end\":{\"line\":64,\"column\":3,\"offset\":971}}},\"loc\":{\"start\":{\"line\":62,\"column\":6,\"offset\":928},\"end\":{\"line\":64,\"column\":3,\"offset\":971}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"goto\",\"label\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"LABEL\",\"loc\":{\"start\":{\"line\":65,\"column\":11,\"offset\":985},\"end\":{\"line\":65,\"column\":16,\"offset\":990}}},\"loc\":{\"start\":{\"line\":65,\"column\":6,\"offset\":980},\"end\":{\"line\":65,\"column\":11,\"offset\":985}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"eval\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"bin\",\"left\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"string\",\"quote\":\"Double\",\"value\":\"return \",\"loc\":{\"start\":{\"line\":66,\"column\":11,\"offset\":1003},\"end\":{\"line\":66,\"column\":11,\"offset\":1003}}},\"operator\":\".\",\"right\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"encapsed\",\"quote\":\"Double\",\"values\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"encapsed_part\",\"is_advanced\":false,\"value\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"string\",\"quote\":\"Single\",\"value\":\"'This is \",\"loc\":{\"start\":{\"line\":66,\"column\":24,\"offset\":1016},\"end\":{\"line\":66,\"column\":33,\"offset\":1025}}},\"loc\":{\"start\":{\"line\":66,\"column\":24,\"offset\":1016},\"end\":{\"line\":66,\"column\":33,\"offset\":1025}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"encapsed_part\",\"is_advanced\":false,\"value\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"variable\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"a\",\"loc\":{\"start\":{\"line\":66,\"column\":33,\"offset\":1025},\"end\":{\"line\":66,\"column\":34,\"offset\":1026}}},\"loc\":{\"start\":{\"line\":66,\"column\":33,\"offset\":1025},\"end\":{\"line\":66,\"column\":34,\"offset\":1026}}},\"loc\":{\"start\":{\"line\":66,\"column\":33,\"offset\":1025},\"end\":{\"line\":66,\"column\":34,\"offset\":1026}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"encapsed_part\",\"is_advanced\":false,\"value\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"string\",\"quote\":\"Single\",\"value\":\"!';\",\"loc\":{\"start\":{\"line\":66,\"column\":35,\"offset\":1027},\"end\":{\"line\":66,\"column\":38,\"offset\":1030}}},\"loc\":{\"start\":{\"line\":66,\"column\":35,\"offset\":1027},\"end\":{\"line\":66,\"column\":38,\"offset\":1030}}}],\"loc\":{\"start\":{\"line\":66,\"column\":23,\"offset\":1015},\"end\":{\"line\":66,\"column\":38,\"offset\":1030}}},\"loc\":{\"start\":{\"line\":66,\"column\":21,\"offset\":1013},\"end\":{\"line\":66,\"column\":38,\"offset\":1030}}},\"loc\":{\"start\":{\"line\":66,\"column\":6,\"offset\":998},\"end\":{\"line\":66,\"column\":39,\"offset\":1031}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"exit\",\"statement\":null,\"loc\":{\"start\":{\"line\":67,\"column\":6,\"offset\":1040},\"end\":{\"line\":67,\"column\":10,\"offset\":1044}}}],\"loc\":{\"start\":{\"line\":56,\"column\":8,\"offset\":767},\"end\":{\"line\":68,\"column\":4,\"offset\":1050}}},\"catches\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"catch\",\"types\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"Exception\",\"loc\":{\"start\":{\"line\":68,\"column\":13,\"offset\":1059},\"end\":{\"line\":68,\"column\":22,\"offset\":1068}}}],\"variable\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"variable\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"e\",\"loc\":{\"start\":{\"line\":68,\"column\":23,\"offset\":1069},\"end\":{\"line\":68,\"column\":24,\"offset\":1070}}},\"loc\":{\"start\":{\"line\":68,\"column\":23,\"offset\":1069},\"end\":{\"line\":68,\"column\":24,\"offset\":1070}}},\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"switch\",\"condition\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"parent\",\"loc\":{\"start\":{\"line\":69,\"column\":14,\"offset\":1089},\"end\":{\"line\":69,\"column\":14,\"offset\":1089}}},\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"case\",\"condition\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"number\",\"value\":\"1\",\"loc\":{\"start\":{\"line\":70,\"column\":13,\"offset\":1112},\"end\":{\"line\":70,\"column\":13,\"offset\":1112}}},\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"foreach\",\"source\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"variable\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"a\",\"loc\":{\"start\":{\"line\":71,\"column\":19,\"offset\":1134},\"end\":{\"line\":71,\"column\":20,\"offset\":1135}}},\"loc\":{\"start\":{\"line\":71,\"column\":19,\"offset\":1134},\"end\":{\"line\":71,\"column\":20,\"offset\":1135}}},\"key\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"variable\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"b\",\"loc\":{\"start\":{\"line\":71,\"column\":25,\"offset\":1140},\"end\":{\"line\":71,\"column\":26,\"offset\":1141}}},\"loc\":{\"start\":{\"line\":71,\"column\":25,\"offset\":1140},\"end\":{\"line\":71,\"column\":26,\"offset\":1141}}},\"value\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"variable\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"c\",\"loc\":{\"start\":{\"line\":71,\"column\":31,\"offset\":1146},\"end\":{\"line\":71,\"column\":32,\"offset\":1147}}},\"loc\":{\"start\":{\"line\":71,\"column\":31,\"offset\":1146},\"end\":{\"line\":71,\"column\":32,\"offset\":1147}}},\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[],\"loc\":{\"start\":{\"line\":71,\"column\":35,\"offset\":1150},\"end\":{\"line\":72,\"column\":10,\"offset\":1162}}},\"is_short\":false,\"loc\":{\"start\":{\"line\":71,\"column\":10,\"offset\":1125},\"end\":{\"line\":72,\"column\":10,\"offset\":1162}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"break\",\"statement\":null,\"loc\":{\"start\":{\"line\":73,\"column\":10,\"offset\":1174},\"end\":{\"line\":73,\"column\":10,\"offset\":1174}}}],\"loc\":{\"start\":{\"line\":71,\"column\":10,\"offset\":1125},\"end\":{\"line\":73,\"column\":15,\"offset\":1179}}},\"loc\":{\"start\":{\"line\":70,\"column\":8,\"offset\":1107},\"end\":{\"line\":73,\"column\":15,\"offset\":1179}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"case\",\"condition\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"number\",\"value\":\"2\",\"loc\":{\"start\":{\"line\":74,\"column\":13,\"offset\":1194},\"end\":{\"line\":74,\"column\":13,\"offset\":1194}}},\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"for\",\"inits\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"assignment\",\"left\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"variable\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"i\",\"loc\":{\"start\":{\"line\":75,\"column\":14,\"offset\":1211},\"end\":{\"line\":75,\"column\":15,\"offset\":1212}}},\"loc\":{\"start\":{\"line\":75,\"column\":14,\"offset\":1211},\"end\":{\"line\":75,\"column\":15,\"offset\":1212}}},\"operator\":\"=\",\"right\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"number\",\"value\":\"0\",\"loc\":{\"start\":{\"line\":75,\"column\":19,\"offset\":1216},\"end\":{\"line\":75,\"column\":19,\"offset\":1216}}},\"loc\":{\"start\":{\"line\":75,\"column\":17,\"offset\":1214},\"end\":{\"line\":75,\"column\":19,\"offset\":1216}}}],\"tests\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"bin\",\"left\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"variable\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"i\",\"loc\":{\"start\":{\"line\":75,\"column\":22,\"offset\":1219},\"end\":{\"line\":75,\"column\":23,\"offset\":1220}}},\"loc\":{\"start\":{\"line\":75,\"column\":22,\"offset\":1219},\"end\":{\"line\":75,\"column\":23,\"offset\":1220}}},\"operator\":\"<\",\"right\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"number\",\"value\":\"5\",\"loc\":{\"start\":{\"line\":75,\"column\":27,\"offset\":1224},\"end\":{\"line\":75,\"column\":27,\"offset\":1224}}},\"loc\":{\"start\":{\"line\":75,\"column\":25,\"offset\":1222},\"end\":{\"line\":75,\"column\":27,\"offset\":1224}}}],\"increments\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"post\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"variable\",\"name\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"identifier\",\"name\":\"i\",\"loc\":{\"start\":{\"line\":75,\"column\":30,\"offset\":1227},\"end\":{\"line\":75,\"column\":31,\"offset\":1228}}},\"loc\":{\"start\":{\"line\":75,\"column\":30,\"offset\":1227},\"end\":{\"line\":75,\"column\":31,\"offset\":1228}}},\"operator\":\"++\",\"loc\":{\"start\":{\"line\":75,\"column\":32,\"offset\":1229},\"end\":{\"line\":75,\"column\":32,\"offset\":1229}}}],\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[],\"loc\":{\"start\":{\"line\":75,\"column\":36,\"offset\":1233},\"end\":{\"line\":76,\"column\":10,\"offset\":1245}}},\"body_type\":\"Basic\",\"loc\":{\"start\":{\"line\":75,\"column\":10,\"offset\":1207},\"end\":{\"line\":76,\"column\":10,\"offset\":1245}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"continue\",\"statement\":null,\"loc\":{\"start\":{\"line\":77,\"column\":10,\"offset\":1257},\"end\":{\"line\":77,\"column\":10,\"offset\":1257}}}],\"loc\":{\"start\":{\"line\":75,\"column\":10,\"offset\":1207},\"end\":{\"line\":77,\"column\":18,\"offset\":1265}}},\"loc\":{\"start\":{\"line\":74,\"column\":8,\"offset\":1189},\"end\":{\"line\":77,\"column\":18,\"offset\":1265}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"case\",\"condition\":null,\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"break\",\"statement\":null,\"loc\":{\"start\":{\"line\":79,\"column\":10,\"offset\":1294},\"end\":{\"line\":79,\"column\":10,\"offset\":1294}}}],\"loc\":{\"start\":{\"line\":79,\"column\":10,\"offset\":1294},\"end\":{\"line\":79,\"column\":15,\"offset\":1299}}},\"loc\":{\"start\":{\"line\":78,\"column\":8,\"offset\":1275},\"end\":{\"line\":79,\"column\":15,\"offset\":1299}}}],\"loc\":{\"start\":{\"line\":69,\"column\":22,\"offset\":1097},\"end\":{\"line\":80,\"column\":6,\"offset\":1307}}},\"is_short\":false,\"loc\":{\"start\":{\"line\":69,\"column\":6,\"offset\":1081},\"end\":{\"line\":80,\"column\":6,\"offset\":1307}}}],\"loc\":{\"start\":{\"line\":68,\"column\":27,\"offset\":1073},\"end\":{\"line\":81,\"column\":4,\"offset\":1313}}},\"loc\":{\"start\":{\"line\":68,\"column\":6,\"offset\":1052},\"end\":{\"line\":81,\"column\":4,\"offset\":1313}}},{\"leadings\":[],\"trailings\":[],\"node_type\":\"finally\",\"body\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"block\",\"statements\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"print\",\"statement\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"here_doc\",\"label\":\"BAR\",\"values\":[{\"leadings\":[],\"trailings\":[],\"node_type\":\"encapsed_part\",\"is_advanced\":false,\"value\":{\"leadings\":[],\"trailings\":[],\"node_type\":\"string\",\"quote\":\"Single\",\"value\":\"\\n  HereDoc\\n\",\"loc\":{\"start\":{\"line\":82,\"column\":18,\"offset\":1343},\"end\":{\"line\":82,\"column\":29,\"offset\":1354}}},\"loc\":{\"start\":{\"line\":82,\"column\":18,\"offset\":1343},\"end\":{\"line\":82,\"column\":29,\"offset\":1354}}}],\"loc\":{\"start\":{\"line\":82,\"column\":12,\"offset\":1337},\"end\":{\"line\":84,\"column\":2,\"offset\":1356}}},\"loc\":{\"start\":{\"line\":82,\"column\":6,\"offset\":1331},\"end\":{\"line\":84,\"column\":2,\"offset\":1356}}}],\"loc\":{\"start\":{\"line\":81,\"column\":14,\"offset\":1323},\"end\":{\"line\":85,\"column\":4,\"offset\":1363}}},\"loc\":{\"start\":{\"line\":81,\"column\":6,\"offset\":1315},\"end\":{\"line\":85,\"column\":4,\"offset\":1363}}}],\"loc\":{\"start\":{\"line\":56,\"column\":4,\"offset\":763},\"end\":{\"line\":85,\"column\":4,\"offset\":1363}}}],\"loc\":{\"start\":{\"line\":54,\"column\":51,\"offset\":746},\"end\":{\"line\":86,\"column\":2,\"offset\":1367}}},\"loc\":{\"start\":{\"line\":54,\"column\":10,\"offset\":705},\"end\":{\"line\":86,\"column\":2,\"offset\":1367}}},\"loc\":{\"start\":{\"line\":54,\"column\":2,\"offset\":697},\"end\":{\"line\":86,\"column\":2,\"offset\":1367}}}],\"loc\":{\"start\":{\"line\":27,\"column\":8,\"offset\":261},\"end\":{\"line\":87,\"column\":0,\"offset\":1369}}},\"is_readonly\":false,\"loc\":{\"start\":{\"line\":27,\"column\":0,\"offset\":253},\"end\":{\"line\":87,\"column\":0,\"offset\":1369}}}],\"loc\":{\"start\":{\"line\":5,\"column\":16,\"offset\":74},\"end\":{\"line\":87,\"column\":0,\"offset\":1369}}},\"is_bracket\":false,\"loc\":{\"start\":{\"line\":5,\"column\":0,\"offset\":58},\"end\":{\"line\":87,\"column\":0,\"offset\":1369}}}],\"loc\":{\"start\":{\"line\":1,\"column\":0,\"offset\":0},\"end\":{\"line\":87,\"column\":0,\"offset\":1369}}}";

  let deserialized: Result<Box<Node>, serde_json::Error> = serde_json::from_str(&sample);
  assert!(deserialized.is_ok(), "Error parsing input: {:?}", deserialized);
}
